# ðŸš€ Google Colabã§æœ€å°é™ã®Fine-tuning - ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

## ðŸ“‹ æ¦‚è¦

- **å®Ÿè¡Œæ™‚é–“**: ç´„15-20åˆ†
- **ä½¿ç”¨ãƒ¢ãƒ‡ãƒ«**: TinyLlama 1.1Bï¼ˆæœ€è»½é‡ï¼‰
- **å¿…è¦ãƒ‡ãƒ¼ã‚¿**: 10-50ã‚µãƒ³ãƒ—ãƒ«
- **å‡ºåŠ›**: Ollamaå¯¾å¿œGGUFãƒ•ã‚¡ã‚¤ãƒ«

## ðŸŽ¯ æ‰‹é †ï¼ˆ5ã‚¹ãƒ†ãƒƒãƒ—ï¼‰

### 1ï¸âƒ£ Google Colabã‚’é–‹ã

1. [Google Colab](https://colab.research.google.com/)ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã€Œãƒ•ã‚¡ã‚¤ãƒ«ã€â†’ã€ŒãƒŽãƒ¼ãƒˆãƒ–ãƒƒã‚¯ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã€
3. `minimal_colab_fine_tuning.ipynb`ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
4. ã€Œãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã€â†’ã€Œãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã®ã‚¿ã‚¤ãƒ—ã‚’å¤‰æ›´ã€â†’ **GPUï¼ˆT4ï¼‰**ã‚’é¸æŠž

### 2ï¸âƒ£ å…¨ã‚»ãƒ«ã‚’å®Ÿè¡Œ

```
ãƒ©ãƒ³ã‚¿ã‚¤ãƒ  â†’ ã™ã¹ã¦ã®ã‚»ãƒ«ã‚’å®Ÿè¡Œ
```

ã¾ãŸã¯å„ã‚»ãƒ«ã‚’é †ç•ªã«`Shift + Enter`ã§å®Ÿè¡Œ

### 3ï¸âƒ£ å®Ÿè¡Œå†…å®¹ï¼ˆè‡ªå‹•ï¼‰

1. **ç’°å¢ƒæ§‹ç¯‰**ï¼ˆ2åˆ†ï¼‰
   - Unslothã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
   
2. **ãƒ‡ãƒ¼ã‚¿æº–å‚™**ï¼ˆ1åˆ†ï¼‰
   - 10å€‹ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
   
3. **Fine-tuning**ï¼ˆ10-15åˆ†ï¼‰
   - TinyLlama 1.1Bã‚’ä½¿ç”¨
   - 30ã‚¹ãƒ†ãƒƒãƒ—ã®ã¿ï¼ˆæœ€å°é™ï¼‰
   
4. **GGUFå¤‰æ›**ï¼ˆ2åˆ†ï¼‰
   - Ollamaç”¨å½¢å¼ã«å¤‰æ›
   
5. **ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰**ï¼ˆè‡ªå‹•ï¼‰
   - `minimal_finetuned_model-unsloth.Q4_K_M.gguf`

### 4ï¸âƒ£ ãƒ­ãƒ¼ã‚«ãƒ«ã§Ollamaä½¿ç”¨

ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸGGUFãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ï¼š

```bash
# 1. Modelfileä½œæˆ
cat > Modelfile << EOF
FROM ./minimal_finetuned_model-unsloth.Q4_K_M.gguf

SYSTEM "ã‚ãªãŸã¯æŠ€è¡“çš„ãªè³ªå•ã«ç­”ãˆã‚‹è¦ªåˆ‡ãªã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™ã€‚"

PARAMETER temperature 0.7
PARAMETER top_p 0.9
EOF

# 2. Ollamaã§ãƒ¢ãƒ‡ãƒ«ä½œæˆ
ollama create my-tech-assistant -f Modelfile

# 3. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
ollama run my-tech-assistant "Pythonã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã—ãŸã€‚ã©ã†ã™ã‚Œã°ã„ã„ã§ã™ã‹ï¼Ÿ"
```

### 5ï¸âƒ£ ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚ºæ–¹æ³•

#### ãƒ‡ãƒ¼ã‚¿ã‚’å¤‰æ›´ã—ãŸã„å ´åˆ

ãƒŽãƒ¼ãƒˆãƒ–ãƒƒã‚¯ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³2ã§`training_data`ã‚’ç·¨é›†ï¼š

```python
training_data = [
    {
        "instruction": "ã‚ãªãŸã®è³ªå•",
        "output": "æœŸå¾…ã•ã‚Œã‚‹å›žç­”"
    },
    # è¿½åŠ ...
]
```

#### ã‚ˆã‚Šè‰¯ã„çµæžœã‚’å¾—ã‚‹ã«ã¯

1. **ãƒ‡ãƒ¼ã‚¿æ•°ã‚’å¢—ã‚„ã™**: 50-100ã‚µãƒ³ãƒ—ãƒ«æŽ¨å¥¨
2. **ã‚¹ãƒ†ãƒƒãƒ—æ•°ã‚’å¢—ã‚„ã™**: `max_steps=50`ã«å¤‰æ›´
3. **ã‚ˆã‚Šå¤§ããªãƒ¢ãƒ‡ãƒ«**: 
   ```python
   model_name="unsloth/llama-3.2-3b-bnb-4bit"  # 3Bãƒ¢ãƒ‡ãƒ«
   ```

## ðŸ’¡ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### GPUä¸è¶³ã‚¨ãƒ©ãƒ¼
â†’ ã‚ˆã‚Šå°ã•ã„ãƒãƒƒãƒã‚µã‚¤ã‚ºï¼š`per_device_train_batch_size=1`

### å®Ÿè¡ŒãŒé…ã„
â†’ ã‚¹ãƒ†ãƒƒãƒ—æ•°ã‚’æ¸›ã‚‰ã™ï¼š`max_steps=20`

### ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ããªã„
â†’ Google Driveã«ãƒžã‚¦ãƒ³ãƒˆï¼š
```python
from google.colab import drive
drive.mount('/content/drive')
!cp *.gguf /content/drive/MyDrive/
```

## ðŸ“Š æœŸå¾…ã•ã‚Œã‚‹çµæžœ

**Fine-tuningå‰**:
```
è³ªå•: Pythonã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã—ãŸ
å›žç­”: Pythonã¯...ï¼ˆä¸€èˆ¬çš„ã§æ›–æ˜§ãªå›žç­”ï¼‰
```

**Fine-tuningå¾Œ**:
```
è³ªå•: Pythonã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã—ãŸ
å›žç­”: ã‚¨ãƒ©ãƒ¼ã®è©³ç´°ã‚’ç¢ºèªã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®æ‰‹é †ã‚’è©¦ã—ã¦ãã ã•ã„ï¼š
1. ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’èª­ã‚“ã§åŽŸå› ã‚’ç‰¹å®š
2. ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã§ç™ºç”Ÿç®‡æ‰€ã‚’ç¢ºèª
3. è©²å½“ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèª...
```

## ðŸŽ‰ å®Œäº†ï¼

ã“ã‚Œã§æœ€å°é™ã®fine-tuningãŒå®Œäº†ã§ã™ã€‚å®Ÿè¡Œæ™‚é–“ã¯ç´„20åˆ†ã€ç„¡æ–™ã®Google Colabã§å®Ÿè¡Œå¯èƒ½ã§ã™ã€‚

ã‚ˆã‚Šæœ¬æ ¼çš„ãªfine-tuningã«ã¯ï¼š
- ãƒ‡ãƒ¼ã‚¿ã‚’50-100ã‚µãƒ³ãƒ—ãƒ«ã«å¢—ã‚„ã™
- ã‚¹ãƒ†ãƒƒãƒ—æ•°ã‚’50-100ã«å¢—ã‚„ã™
- 3Bã‚„7Bãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨ï¼ˆColab ProãŒå¿…è¦ãªå ´åˆã‚ã‚Šï¼‰